"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2847],{2847:(b,d,a)=>{a.r(d),a.d(d,{ConnexionPageModule:()=>Z});var m=a(6895),g=a(433),l=a(2723),c=a(1407),n=a(8256),u=a(9130),p=a(7184);function f(o,i){1&o&&(n.TgZ(0,"div",29),n._uU(1," Mot de passe ou email incorrect "),n.qZA())}function x(o,i){1&o&&(n.TgZ(0,"div",30),n._uU(1," Nom d'utilisateur est obligatoire ! "),n.qZA())}function _(o,i){1&o&&(n.TgZ(0,"div"),n._uU(1,"Mot de passe est obligatoire !"),n.qZA())}function C(o,i){1&o&&(n.TgZ(0,"div"),n._uU(1," 6 caract\xe8res au minimum "),n.qZA())}function h(o,i){if(1&o&&(n.TgZ(0,"div",30),n.YNc(1,_,2,0,"div",31),n.YNc(2,C,2,0,"div",31),n.qZA()),2&o){n.oxw();const e=n.MAs(10);n.xp6(1),n.Q6J("ngIf",e.errors),n.xp6(1),n.Q6J("ngIf",e.errors)}}function M(o,i){if(1&o){const e=n.EpF();n.TgZ(0,"form",15,16),n.NdJ("ngSubmit",function(){n.CHM(e);const t=n.MAs(1),s=n.oxw();return n.KtG(t.form.valid&&s.onSubmit())}),n.YNc(2,f,2,0,"div",17),n.TgZ(3,"div",18)(4,"ion-input",19,20),n.NdJ("ngModelChange",function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.form.usernameOrEmail=t)}),n.qZA()(),n.YNc(6,x,2,0,"div",21),n._UZ(7,"br"),n.TgZ(8,"div",22)(9,"ion-input",23,24),n.NdJ("ngModelChange",function(t){n.CHM(e);const s=n.oxw();return n.KtG(s.form.password=t)}),n.qZA()(),n.YNc(11,h,3,2,"div",25),n.TgZ(12,"div",26)(13,"a",27),n._uU(14,"Mot de passe oublier ?"),n.qZA()(),n.TgZ(15,"div",28)(16,"button"),n._uU(17,"Connexion"),n.qZA()()()}if(2&o){const e=n.MAs(1),r=n.MAs(5),t=n.MAs(10),s=n.oxw();n.xp6(2),n.Q6J("ngIf",e.submitted&&s.isLoginFailed),n.xp6(2),n.Q6J("ngModel",s.form.usernameOrEmail),n.xp6(2),n.Q6J("ngIf",r.errors&&e.submitted),n.xp6(3),n.Q6J("ngModel",s.form.password),n.xp6(2),n.Q6J("ngIf",t.errors&&e.submitted)}}const v=[{path:"",component:(()=>{class o{constructor(e,r,t){this.route=e,this.authService=r,this.tokenStorage=t,this.form={usernameOrEmail:null,password:null},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMessage="",this.roles=[]}ngOnInit(){}loadData(){this.route.navigateByUrl("/connexion")}onSubmit(){const{usernameOrEmail:e,password:r}=this.form;this.authService.login(e,r).subscribe(t=>{this.tokenStorage.saveToken(t.accessToken),this.tokenStorage.saveUser(t),this.isLoginFailed=!1,this.isLoggedIn=!0,this.roles=this.tokenStorage.getUser().roles,1==this.isLoggedIn?this.route.navigateByUrl("bottom-bar/accueil"):this.isLoginFailed=!0},t=>{this.isLoginFailed=!0,this.errorMessage=t.error.message})}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(c.F0),n.Y36(u.e),n.Y36(p.i))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-connexion"]],decls:22,vars:1,consts:[[1,"containeurLogo"],["src","../../../assets/img/logo1.png","alt","logo","srcset","","width","45%"],[1,"annuler",2,"position","absolute","top","40px","right","20px"],["routerLink","/bottom-bar/accueil",2,"color","red","font-weight","bold","text-decoration","none"],[1,"formLogin"],["name","form","novalidate","",3,"ngSubmit",4,"ngIf"],[1,"oauth2"],[1,"google"],["name","logo-google",2,"color","red"],[1,"facebook"],["name","logo-facebook",2,"color","blue"],[1,"logo-github"],["name","logo-github"],[1,"creerCompte"],["routerLink","/inscription"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],["class","alert alert-danger errorMessages",4,"ngIf"],[1,"emailForm"],["type","text","placeholder","telephone / email","ngModel","","autofocus","","name","usernameOrEmail","required","",3,"ngModel","ngModelChange"],["usernameOrEmail","ngModel"],["class","alert alert-danger col-md-6","role","alert",4,"ngIf"],[1,"passwordForm"],["type","password","placeholder","Mot de passe","maxlength","20","minlength","6","ngModel","","name","password","required","","minlength","6",3,"ngModel","ngModelChange"],["password","ngModel"],["class","alert alert-danger  col-md-6","role","alert",4,"ngIf"],[2,"cursor","pointer","margin-top","5%"],["routerLink","/motdepasseoublier"],[1,"Connexion"],[1,"alert","alert-danger","errorMessages"],["role","alert",1,"alert","alert-danger","col-md-6"],[4,"ngIf"]],template:function(e,r){1&e&&(n.TgZ(0,"ion-content")(1,"div",0),n._UZ(2,"img",1),n.TgZ(3,"div",2)(4,"a",3),n._uU(5,"Ignorer"),n.qZA()()(),n.TgZ(6,"div",4),n.YNc(7,M,18,5,"form",5),n.TgZ(8,"div")(9,"p")(10,"strong"),n._uU(11,"OU"),n.qZA()()(),n.TgZ(12,"div",6)(13,"div",7),n._UZ(14,"ion-icon",8),n.qZA(),n.TgZ(15,"div",9),n._UZ(16,"ion-icon",10),n.qZA(),n.TgZ(17,"div",11),n._UZ(18,"ion-icon",12),n.qZA()(),n.TgZ(19,"div",13)(20,"a",14),n._uU(21,"Cr\xe9er un compte ?"),n.qZA()()()()),2&e&&(n.xp6(7),n.Q6J("ngIf",!r.isLoggedIn))},dependencies:[m.O5,g._Y,g.JJ,g.JL,g.Q7,g.wO,g.nD,g.On,g.F,l.W2,l.gu,l.pK,l.j9,l.Fo,c.rH],styles:[".containeurLogo[_ngcontent-%COMP%]{text-align:center;margin-top:20%}.alert[_ngcontent-%COMP%]{color:red}.formLogin[_ngcontent-%COMP%]{text-align:center}.formLogin[_ngcontent-%COMP%]   .emailForm[_ngcontent-%COMP%], .formLogin[_ngcontent-%COMP%]   .passwordForm[_ngcontent-%COMP%]{margin:2% auto;border:1px solid #04CF72;border-radius:5px;box-shadow:0 4px 4px rgba(0,0,0,.25);width:95%;background:white}.Connexion[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;background-color:#04cf72;text-align:center;padding:10px;font-size:20px;font-weight:700;text-transform:capitalize;color:#fff;border-radius:5px}.oauth2[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center;justify-content:center;gap:10px}.oauth2[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}.creerCompte[_ngcontent-%COMP%]{margin-top:20px}.creerCompte[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:15px;color:#04cf72;font-weight:800}ion-modal#example-modal[_ngcontent-%COMP%]{--width: fit-content;--min-width: 250px;--height: fit-content;--border-radius: 6px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4)}ion-modal#example-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:20px 20px 10px}ion-modal#example-modal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;width:48px;height:48px;padding:4px 0;color:#aaa}ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{margin-bottom:10px}.forms[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px;margin:10px;color:#04cf72;font-weight:700}.forms[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;border-radius:5px;background-color:#04cf72;color:#fff;margin:10px auto!important}"]}),o})()}];let P=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[c.Bz.forChild(v),c.Bz]}),o})(),Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[m.ez,g.u5,l.Pc,P]}),o})()}}]);